<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ZEBROL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white">
  <div id="root"></div>

  <script>
    firebase.initializeApp({
      apiKey: "SUA_API_KEY",
      authDomain: "zebrol.firebaseapp.com",
      projectId: "zebrol",
    });

    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>

  <script>
    const e = React.createElement;
    const { useState, useEffect } = React;

    function App() {
      const [items, setItems] = useState([]);
      const [selected, setSelected] = useState(null);
      const [search, setSearch] = useState("");
      const [showSearch, setShowSearch] = useState(false);

      useEffect(() => {
        auth.signInAnonymously();

        db.collection("pessoas").onSnapshot((snap) => {
          const data = snap.docs.map(d => ({ id: d.id, ...d.data() }));
          data.sort((a, b) => a.name.localeCompare(b.name));
          setItems(data);
        });
      }, []);

      const filtered = items.filter(i =>
        `${i.name} ${i.vulgo} ${i.faccao}`
          .toLowerCase()
          .includes(search.toLowerCase())
      );

      return e("div", { className: "p-4 space-y-4" }, [

        e("h1", { className: "text-3xl font-bold text-center", key: 1 }, "ZEBROL"),

        showSearch && e("input", {
          key: 2,
          className: "w-full p-2 rounded bg-gray-800",
          placeholder: "Buscar por nome, vulgo ou fac√ß√£o",
          value: search,
          onChange: ev => setSearch(ev.target.value)
        }),

        e("div", {
          key: 3,
          className: "grid grid-cols-2 gap-4 max-w-md mx-auto"
        },
          filtered.map(item =>
            e("div", {
              key: item.id,
              className: "bg-gray-900 rounded-xl p-3 cursor-pointer",
              onClick: () => setSelected(item)
            }, [
              e("div", {
                className: "h-32 bg-gray-700 rounded overflow-hidden mb-2",
                key: "img"
              }, item.image && e("img", {
                src: item.image,
                className: "w-full h-full object-cover"
              })),
              e("p", { className: "text-center font-semibold" }, item.name)
            ])
          )
        ),

        selected && e("div", {
          key: 4,
          className: "fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"
        },
          e("div", {
            className: "bg-gray-900 p-4 rounded-xl max-w-sm w-full space-y-2 relative"
          }, [
            e("button", {
              className: "absolute top-2 right-3 text-red-400",
              onClick: () => setSelected(null)
            }, "Fechar"),

            selected.image && e("img", {
              src: selected.image,
              className: "w-full max-h-64 object-contain rounded"
            }),

            e("p", null, `Nome: ${selected.name}`),
            e("p", null, `Vulgo: ${selected.vulgo || ""}`),
            e("p", null, `Fac√ß√£o: ${selected.faccao || ""}`),
            e("p", null, `CPF: ${selected.cpf || ""}`),
            e("p", null, `Nascimento: ${selected.birth || ""}`),
            e("p", null, `M√£e: ${selected.mother || ""}`),
            e("p", null, `Endere√ßo: ${selected.address || ""}`),
            e("p", null, `Descri√ß√£o: ${selected.description || ""}`)
          ])
        ),

        e("button", {
          key: 5,
          className: "fixed bottom-6 left-6 text-3xl",
          onClick: () => setShowSearch(!showSearch)
        }, "üîç")
      ]);
    }

    ReactDOM.createRoot(document.getElementById("root")).render(e(App));
  </script>
</body>
</html>
