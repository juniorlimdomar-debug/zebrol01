<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZEBROL</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-black text-white">

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function App() {
      const [items, setItems] = useState(() => {
        const saved = localStorage.getItem("zebrol_items");
        return saved ? JSON.parse(saved) : [];
      });

      const [selected, setSelected] = useState(null);
      const [showForm, setShowForm] = useState(false);
      const [editIndex, setEditIndex] = useState(null);
      const [confirmDelete, setConfirmDelete] = useState(null);

      const [form, setForm] = useState({
        image: "",
        name: "",
        vulgo: "",
        faction: "",
        cpf: "",
        birth: "",
        mother: "",
        address: "",
        description: "",
      });

      useEffect(() => {
        localStorage.setItem("zebrol_items", JSON.stringify(items));
      }, [items]);

      const handleChange = (e) => {
        const { name, value, files } = e.target;
        if (files && files[0]) {
          const reader = new FileReader();
          reader.onload = () => {
            setForm((prev) => ({ ...prev, [name]: reader.result }));
          };
          reader.readAsDataURL(files[0]);
        } else {
          setForm((prev) => ({ ...prev, [name]: value }));
        }
      };

      const saveItem = () => {
        if (editIndex !== null) {
          setItems(items.map((item, i) => (i === editIndex ? { ...form } : item)));
          setEditIndex(null);
        } else {
          setItems([...items, { ...form }]);
        }
        setForm({
          image: "",
          name: "",
          vulgo: "",
          faction: "",
          cpf: "",
          birth: "",
          mother: "",
          address: "",
          description: "",
        });
      };

      const confirmDeleteYes = () => {
        setItems(items.filter((_, i) => i !== confirmDelete));
        setConfirmDelete(null);
        setSelected(null);
      };

      return (
        <div className="min-h-screen p-6 space-y-8">
          <h1 className="text-3xl font-bold text-center">ZEBROL</h1>

          <div className="grid grid-cols-2 gap-4 max-w-md mx-auto">
            {items.map((item, index) => (
              <div
                key={index}
                onClick={() => setSelected({ item, index })}
                className="bg-gray-900 rounded-2xl p-4 shadow-lg cursor-pointer hover:bg-gray-800"
              >
                <div className="w-full h-32 bg-gray-700 rounded mb-3 overflow-hidden">
                  {item.image ? (
                    <img src={item.image} className="w-full h-full object-cover"/>
                  ) : (
                    <div className="w-full h-full flex items-center justify-center text-gray-400">
                      Sem foto
                    </div>
                  )}
                </div>
                <p className="text-center font-semibold">{item.name || "Sem nome"}</p>
              </div>
            ))}
          </div>

          {selected && (
            <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-40">
              <div className="relative bg-gray-900 p-6 rounded-2xl w-full max-w-sm space-y-2">
                <button onClick={() => setSelected(null)} className="absolute top-2 right-3 text-red-400">Fechar</button>

                {selected.item.image && (
                  <img src={selected.item.image} className="w-full h-48 object-cover rounded mb-2"/>
                )}

                <p><strong>Nome:</strong> {selected.item.name}</p>
                <p><strong>Vulgo:</strong> {selected.item.vulgo}</p>
                <p><strong>Fac√ß√£o:</strong> {selected.item.faction}</p>
                <p><strong>CPF:</strong> {selected.item.cpf}</p>
                <p><strong>Nascimento:</strong> {selected.item.birth}</p>
                <p><strong>M√£e:</strong> {selected.item.mother}</p>
                <p><strong>Endere√ßo:</strong> {selected.item.address}</p>
                <p><strong>Descri√ß√£o:</strong> {selected.item.description}</p>

                <button
                  className="absolute bottom-4 left-4 text-blue-500 text-2xl"
                  onClick={() => {
                    setForm(selected.item);
                    setEditIndex(selected.index);
                    setShowForm(true);
                  }}
                >
                  ‚úèÔ∏è
                </button>

                <button
                  className="absolute bottom-4 right-4 text-red-500 text-2xl"
                  onClick={() => setConfirmDelete(selected.index)}
                >
                  üóëÔ∏è
                </button>
              </div>
            </div>
          )}

          {confirmDelete !== null && (
            <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
              <div className="bg-gray-900 p-6 rounded-xl text-center space-y-4">
                <p className="font-semibold">Deseja excluir este registro?</p>
                <div className="flex gap-4">
                  <button onClick={confirmDeleteYes} className="bg-red-600 px-4 py-2 rounded">Sim</button>
                  <button onClick={() => setConfirmDelete(null)} className="bg-gray-700 px-4 py-2 rounded">N√£o</button>
                </div>
              </div>
            </div>
          )}

          <button
            onClick={() => setShowForm(true)}
            className="fixed bottom-6 right-6 bg-blue-600 w-14 h-14 rounded-full text-3xl font-bold"
          >
            +
          </button>

          {showForm && (
            <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-40">
              <div className="bg-gray-900 p-6 rounded-2xl w-full max-w-sm space-y-3">
                <h2 className="text-xl font-semibold text-center">Cadastrar / Editar</h2>

                <input type="file" name="image" onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="name" placeholder="Nome" value={form.name} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="vulgo" placeholder="Vulgo" value={form.vulgo} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="faction" placeholder="Fac√ß√£o" value={form.faction} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="cpf" placeholder="CPF" value={form.cpf} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" type="date" name="birth" value={form.birth} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="mother" placeholder="Nome da M√£e" value={form.mother} onChange={handleChange}/>
                <input className="w-full bg-gray-800 p-2 rounded" name="address" placeholder="Endere√ßo" value={form.address} onChange={handleChange}/>
                <textarea className="w-full bg-gray-800 p-2 rounded" name="description" placeholder="Descri√ß√£o" value={form.description} onChange={handleChange}></textarea>

                <button
                  onClick={() => {
                    saveItem();
                    setShowForm(false);
                  }}
                  className="w-full bg-blue-600 p-2 rounded font-semibold"
                >
                  Salvar
                </button>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>

</body>
</html>
